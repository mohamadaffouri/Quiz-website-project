<!DOCTYPE html>
   <html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <!--=============== REMIXICONS ===============-->
      <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">

      <!--=============== CSS ===============-->
      <link rel="stylesheet" href="assets/css/styles.css">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

      <title></title>
   </head>
   <body>
    <nav class="navbar navbar-expand-lg  pg-transparen fixed-top navbar">
      <div class="container-fluid">
          <a class="navbar-brand fs-4" href="#">QuizZes</a>
          <button class="navbar-toggler shadow-non border-0" type="button" data-bs-toggle="offcanvas"
                  data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
              <span class="navbar-toggler-icon"></span>
          </button>
          <div class="sidebar offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar"
               aria-labelledby="offcanvasNavbarLabel">
              <div class="offcanvas-header text-white border-bottom ">
                  <h5 class="offcanvas-title" id="offcanvasNavbarLabel">QuizZes</h5>
                  <button type="button" class="btn-close btn-close-white shadow-non" data-bs-dismiss="offcanvas"
                          aria-label="Close"></button>
              </div>
              <div class="offcanvas-body ">
                  <ul class="navbar-nav justify-content-center fs-5 flex-grow-1 pe-3 ">
                      <li class="nav-item">
                          <a class="nav-link active" aria-current="page" href="/mainPage/test.html#FAhome">Home</a>
                      </li>
                      <li class="nav-item mx-2">
                          <a class="nav-link" href="/mainPage/test.html#AS_aboutuslink">About</a>
                      </li>
                      <li class="nav-item mx-2">
                          <a class="nav-link" href="/mainPage/test.html#quizSessions">Our Quizzes</a>
                      </li>
                      <li class="nav-item mx-2">
                          <a class="nav-link" href="/mainPage/test.html#AS_Contactlink">contact</a>
                      </li>
                  </ul>
                 
              </div>
          </div>
      </div>
    </nav>


      <div class="login" style="height: 110vh;">
         <img src="https://images.unsplash.com/photo-1531973576160-7125cd663d86?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="login image" class="login_img">
         <form action="" class="login__form" onsubmit="validateForm(event)">
            <h1 class="login__title">Registration</h1>

            <div class="login__content">
               <div class="login__box">
                  <i class="ri-mail-line login__icon"></i>

                  <div class="login__box-input">
                     <input type="email"  class="login__input" id="login-email" >
                     <label for="login-email" class="login__label">Email</label>
                  </div>
               </div>
               <div id="errorEmail" class="error"></div>

               <div class="login__box">
                  <i class="ri-user-3-line login__icon"></i>

                  <div class="login__box-input">
                     <input type="text"  class="login__input" id="reg-userName" placeholder=" ">
                     <label for="reg-userName" class="login__label">UserName</label>
                  </div>
               </div>
               <div id="errorName" class="error"></div>

               <div class="login__box">
                  <i class="ri-lock-2-line login__icon"></i>

                  <div class="login__box-input">
                     <input type="password"  class="login__input" id="login-pass"  placeholder=" ">
                     <label for="login-pass" class="login__label">Password</label>
                     <i class="ri-eye-off-line login__eye" id="login-eye-pass" onclick="togglePassword('login-pass', 'login-eye-pass')"></i>
                  </div>
               </div>
               <div id="errorPass" class="error"></div>
               <div class="login__box">
                  <i class="ri-lock-2-line login__icon"></i>

                  <div class="login__box-input">
                     <input type="password"  class="login__input" id="login-confirmPass" placeholder=" ">
                     <label for="login-pass" class="login__label">Confirm Password</label>
                     <i class="ri-eye-off-line login__eye" id="login-eye-confirm" onclick="togglePassword('login-confirmPass', 'login-eye-confirm')"></i>
                  </div>
               </div>
            </div>
            <div id="errorConfirme" class="error"></div>

            

            <button type="submit" class="login__button">Registration</button>

            <p class="login__register">
               Already have an account? <a href="index.html">Login</a>
            </p>
         </form>
      </div>
      
      <!--=============== MAIN JS ===============-->
      <script>
        const quizSubject = sessionStorage.getItem("quizValu");

    if(quizSubject !=null && quizSubject !="" ){
 
        } else window.location.href = "/mainPage/test.html"; 
         var email;
         var emailV;
         function validateEmail(e){
             event.preventDefault();
             email = document.getElementById("login-email").value;
             var errorDiv = document.getElementById("errorEmail");
             const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
             if (regex.test(email)) {
               errorDiv.textContent = "";
               errorDiv.style.display = 'none';
                 emailV = true;
             } else {
                 errorDiv.textContent = "Please enter a valid email address.";
                 errorDiv.style.color = "red";
                 errorDiv.style.display = 'block';
                 emailV = false;
             }
         }
     
         var password;
         var passwordV;
         function validatePassword(e){
             event.preventDefault();
             password = document.getElementById("login-pass").value;
             var errorDiv = document.getElementById("errorPass");
             const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
             if (regex.test(password)) {
               errorDiv.textContent = "";
               errorDiv.style.display = 'none';
                 
                 passwordV = true;
             } else {
                 errorDiv.textContent = "Password must be 8+ chars with 1 uppercase, 1 lowercase, 1 digit, and 1 special character.";
                 errorDiv.style.color = "red";
                 errorDiv.style.display = 'block';
                 passwordV = false;
             }
         }
     
         var confirmPV;
         function confirmPassword(e){
             event.preventDefault();
             var password0 = document.getElementById("login-pass").value;
             var password1 = document.getElementById("login-confirmPass").value;
             var errorDiv = document.getElementById("errorConfirme");
             if (password0 != password1) {
                 errorDiv.textContent = "Password does not match";
                 errorDiv.style.color = "red";
                 errorDiv.style.display = 'block';
                 confirmPV = false;
             } else {
                 errorDiv.textContent = "";
                 confirmPV = true;
                 errorDiv.style.display = 'none';
             }
         }
     
         var userName;
         var userV;
         function validateUser(){
             userName = document.getElementById("reg-userName").value;
             var errorDiv = document.getElementById("errorName");
             if (userName !== null && userName !== "") {
                 userV = true;
                 errorDiv.textContent = "";
                 errorDiv.style.display = 'none';
             } else {
                 errorDiv.textContent = "Please enter your user name";
                 errorDiv.style.color = "red";
                 errorDiv.style.display = 'block';
                 userV = false;
             }
         }
     
         function validateForm(e){
             validatePassword(e);
             validateEmail(e);
             confirmPassword(e);
             validateUser(e);
             if (userV && confirmPV && passwordV && emailV) {
                 // Retrieve the existing users from local storage
                 var users = JSON.parse(localStorage.getItem("users")) || [];
                 console.log(users);
                 // Create a new user object
                 var newUser = {
                     email: email,
                     password: password,
                     userName: userName
                 };
                 
                 // Add the new user to the users array
                 users.push(newUser);
                 
                 // Save the updated users array back to local storage
                 localStorage.setItem("users", JSON.stringify(users));
                 window.location.href = 'index.html';
                alert("account created successfully");
             }
             
         }
         function togglePassword(inputId, iconId) {
         var passwordInput = document.getElementById(inputId);
         var icon = document.getElementById(iconId);
         if (passwordInput.type === "password") {
             passwordInput.type = "text";
             icon.classList.remove("ri-eye-off-line");
             icon.classList.add("ri-eye-line");
         } else {
             passwordInput.type = "password";
             icon.classList.remove("ri-eye-line");
             icon.classList.add("ri-eye-off-line");
         }
      }
     </script>
     
   </body>
</html>
